<!DOCTYPE html> <!-- vim: set foldmethod=marker foldlevel=0 cc=60 :-->
<!--
Process this file with cog:

    $ pip install -r requirements.txt
    $ python -m cogapp -r match_case.html

-->
<html>
<!-- *** Head stuff {{{ -->
<!--[[[cog
import cog
from cogutil import *
]]]-->
<!--[[[end]]]-->
<head>
    <title>Prez Title</title>
    <meta charset="utf-8" />

    <!-- *** Includes {{{ -->
    <!-- Slippy core file and dependencies -->
    <script type="text/javascript" src="slippy/jquery.min.js"></script>
    <script type="text/javascript" src="slippy/jquery.history.js"></script>
    <script type="text/javascript" src="slippy/slippy.js"></script>
    <script type="text/javascript" src="typogr.min.js"></script>

    <!-- Slippy structural styles -->
    <link type="text/css" rel="stylesheet" href="slippy/slippy.css"/>
    <!-- Slippy theme -->
    <link type="text/css" rel="stylesheet" href="slippy/slippy-pure.css"/>
    <!-- Our styles -->
    <link type="text/css" rel="stylesheet" href="slides.css"/>

    <!-- Highlight, for syntax coloring. -->
    <script type="text/javascript" src="highlight/highlight.min.js"></script>
    <link rel="stylesheet" href="highlight/vs.css">

    <script type="text/javascript" src="lineselect.js"></script>

    <!-- http://html.adobe.com/edge/webfonts/ -->
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800' rel='stylesheet' type='text/css'>
    <!-- }}} -->

    <script type="text/javascript" src="slides.js"></script>
    <!-- }}} -->

    <!-- *** Custom style for this deck {{{ -->
    <style type="text/css">
    </style>
    <!-- }}} -->

</head>
<!-- }}} -->
<body class="slides">

<div class="slide title" data-layout="clean">
    <h1>match/case</h1>
    <h2>
        Ned Batchelder<br/>
        @nedbat
    </h2>
</div>

<div class="text"><!-- {{{ -->

<p>Blah blah blah.</p>

</div><!-- }}} -->


<div class="slide">
    <h1>New in 3.10: match/case</h1>
    <ul>
    <li class="incremental">Not "switch for Python"</li>
    <li class="incremental">Pattern-matching against data structures</li>
    <li class="incremental">Four PEPs!
        <ul>
            <li>622 – Structural Pattern Matching</li>
            <li>634 – S.P.M: Specification</li>
            <li>635 – S.P.M: Motivation and Rationale</li>
            <li>636 – S.P.M: Tutorial</li>
        </ul>
    </li>
    </ul>
</div>


<div class="slide">
    <h1>Matching a sequence</h1>
    <pre class="python">
    command = "go north"

    match command.split():  # ['go', 'north']
        case [action, obj]:
            # action == 'go'; obj == 'north'
            ...             
    </pre>
</div>

<div class="slide">
    <h1>Multiple patterns</h1>
    <pre class="python">
    match command.split():

        case [action]:
            # interpret single-verb action
            ...

        case [action, obj]:
            # interpret action, obj 
            ...
    </pre>
</div>

<div class="slide">
    <h1>Specific values</h1>
    <pre class="python">
    match command.split():
        
        case ["quit"]:
            quit_game()

        case ["look"]:
            current_room.describe()

        case ["get", obj]:
            character.get(obj, current_room)

        case ["go", direction]:
            current_room = current_room.neighbor(direction)
    </pre>
</div>

<div class="slide">
    <h1>Included code</h1>
    <!--[[[cog include_file("sample.py") ]]] {{{ -->
    <pre class='python'>
    def f(n):
        print("Look!: {}".format(n))
        if n &gt; 0:
            f(n-1)

    f(4)
    </pre>
    <!--[[[end]]] }}}-->
    <!--[[[cog include_file("sample.out") ]]] {{{ -->
    <pre class='text'>
    Look!: 4
    Look!: 3
    Look!: 2
    Look!: 1
    Look!: 0
    </pre>
    <!--[[[end]]] }}}-->
</div>


<div class="slide">
    <h1>Smaller code</h1>
    <!--[[[cog include_file("sample.py", classes="small") ]]] {{{ -->
    <pre class='python small'>
    def f(n):
        print("Look!: {}".format(n))
        if n &gt; 0:
            f(n-1)

    f(4)
    </pre>
    <!--[[[end]]] }}}-->
    <!--[[[cog include_file("sample.out", classes="small") ]]] {{{ -->
    <pre class='text small'>
    Look!: 4
    Look!: 3
    Look!: 2
    Look!: 1
    Look!: 0
    </pre>
    <!--[[[end]]] }}}-->
</div>


<div class="slide title" data-layout="clean">
    <h1 style="padding-top: 0em">Questions?</h1>
    <h2 style="margin-top: 5em">
        @nedbat
    </h2>
</div>


<!-- ** Layouts {{{ -->
<div class="layout" data-name="default">
    <content></content>
</div>

<div class="layout nofooter" data-name="clean">
    <content></content>
</div>
<!-- }}} -->

</body>
</html>
